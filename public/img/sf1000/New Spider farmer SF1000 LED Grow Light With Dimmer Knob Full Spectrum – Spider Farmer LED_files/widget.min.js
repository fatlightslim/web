var StampedFn=StampedFn||function(N,F){var a,L,q={DEFAULT_ENDPOINT:N.stamped_ajax_url||"//stamped.io/api",SECURE_ENDPOINT:N.stamped_ajax_secure_url||"https://stamped.io/api",metafields:N.mainWidgetMetafields||"",exclude_main_css:N.stamped_exclude_main_css||!1,exclude_font:N.stamped_disable_font||!1,disable_single_review:N.stamped_disable_review_single||!1,is_preview:N.isStampedLauncherPreview||!1,modal_ugc_image_viewer:N.stamped_modal_ugc_viewer_type||"image",is_init_rewards:!0,is_force_jquery:N.stamped_force_jquery||!1,is_disable_cache_badge:N.stamped_disable_cache_badge||!1,is_disable_cache:N.stamped_disable_cache||!1,referral_code:null,is_rewards_code_copy:!1,is_ignore_submit_error:!1,slick_options:N.stamped_slick_options||{dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,slide:".stamped-review",initialSlide:0,rows:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},includes_options:{rewards_button_js:!0,rewards_window_js:!0}},k=!1,s=!1;N.StampedGlobalOptions={},N.isInitializedStamped=!1;var _,n,o,l,p,c,m,u,h,g,v,f,w,t=[],y=[],b=[],C={},S="div#stamped-main-widget",I={},T="html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; }";function O(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||N.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function j(e){if("click"===e.type)return!0;if("keypress"!==e.type)return!1;e=e.charCode||e.keyCode;return 32===e||13===e||void 0}function d(e){var t=F.createElement("span");t.appendChild(F.createTextNode(e)),t.id="tempCopyToClipboard",F.body.append(t);e=F.createRange();e.selectNode(t),N.getSelection().removeAllRanges(),N.getSelection().addRange(e),F.execCommand("copy"),N.getSelection().removeAllRanges(),t.remove()}function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=F.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,s=arguments[t];for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}String.prototype.formatStringStamped=function(){for(var e=this,t=0;t<arguments.length;t++)var a=new RegExp("\\{"+t+"\\}","gi"),e=e.replace(a,arguments[t]);return e},"function"!=typeof N.CustomEvent&&(e.prototype=N.Event.prototype,N.CustomEvent=e),N.lazyLoadOptionsStamped={elements_selector:".stamped-lazyload"},N.addEventListener("LazyLoad::Initialized",function(e){N.LazyLoadStamped=e.detail.instance},!1);var r;!function(){"use strict";function r(e,t){var a,s=new e(t);try{a=new CustomEvent("LazyLoad::Initialized",{detail:{instance:s}})}catch(e){(a=F.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:s})}try{N.dispatchEvent(a)}catch(t){}}function d(e,t){return e.getAttribute("data-"+t)}function i(e,t,a){t="data-"+t,null!==a?e.setAttribute(t,a):e.removeAttribute(t)}function n(e){return"true"===d(e,"was-processed")}function o(e,t){return i(e,"ll-timeout",t),0}function l(e){return d(e,"ll-timeout")}function p(e,t){e&&e(t)}function c(e,t){e._loadingCount+=t,0===e._elements.length&&0===e._loadingCount&&p(e._settings.callback_finish)}function s(e){for(var t,a=[],s=0;t=e.children[s];s+=1)"SOURCE"===t.tagName&&a.push(t);return a}function a(e,t,a){a&&e.setAttribute(t,a)}function m(e,t){a(e,"sizes",d(e,t.data_sizes)),a(e,"srcset",d(e,t.data_srcset)),a(e,"src",d(e,t.data_src))}function u(e,t){I?e.classList.add(t):e.className+=(e.className?" ":"")+t}function h(e,t,a){e.addEventListener(t,a)}function g(e,t,a){e.removeEventListener(t,a)}function v(e,t,a){g(e,"load",t),g(e,"loadeddata",t),g(e,"error",a)}function f(e,t,a){var s=a._settings,r=t?s.class_loaded:s.class_error,i=t?s.callback_loaded:s.callback_error,t=e.target;e=t,s=s.class_loading,I?e.classList.remove(s):e.className=e.className.replace(new RegExp("(^|\\s+)"+s+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""),u(t,r),p(i,t),c(a,-1)}function w(a,s){function r(e){f(e,!0,s),v(a,r,d)}var e,t,i,d=function e(t){f(t,!1,s),v(a,r,e)};i=d,h(e=a,"load",t=r),h(e,"loadeddata",t),h(e,"error",i)}function y(e,t){var a=t._observer;U(e,t),a&&t._settings.auto_unobserve&&a.unobserve(e)}function b(e){var t=l(e);t&&(clearTimeout(t),o(e,null))}function S(n){return!!C&&(n._observer=new IntersectionObserver(function(e){e.forEach(function(e){return e.isIntersecting||0<e.intersectionRatio?(t=e.target,d=(a=n)._settings,p(d.callback_enter,t),void(d.load_delay?(s=t,i=(r=a)._settings.load_delay,(d=l(s))||(d=setTimeout(function(){y(s,r),b(s)},i),o(s,d))):y(t,a))):(a=e.target,e=n._settings,p(e.callback_exit,a),void(e.load_delay&&b(a)));var t,a,s,r,i,d})},{root:(e=n._settings).container===F?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),!0);var e}function k(e,t){return(t=e||function(e){return e.container.querySelectorAll(e.elements_selector)}(t),Array.prototype.slice.call(t)).filter(function(e){return!n(e)})}function e(e,t){this._settings=R({},T,e),this._loadingCount=0,S(this),this.update(t)}var t=void 0!==N,_=t&&!("onscroll"in N)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),C=t&&"IntersectionObserver"in N,I=t&&"classList"in F.createElement("p"),T={elements_selector:"img",container:_||t?F:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"stamped-lazyload-loading",class_loaded:"stamped-lazyload-loaded",class_error:"stamped-lazyload-error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},O={IMG:function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&s(a).forEach(function(e){m(e,t)}),m(e,t)},IFRAME:function(e,t){a(e,"src",d(e,t.data_src))},VIDEO:function(e,t){s(e).forEach(function(e){a(e,"src",d(e,t.data_src))}),a(e,"src",d(e,t.data_src)),e.load()}},E=["IMG","IFRAME","VIDEO"],U=function(e,t,a){var s=t._settings;!a&&n(e)||(-1<E.indexOf(e.tagName)&&(w(e,t),u(e,s.class_loading)),function(e,t){var a,s,r=t._settings,i=e.tagName;if(i=O[i])return i(e,r),c(t,1),t._elements=(s=t._elements,a=e,s.filter(function(e){return e!==a}));r=d(s=e,(e=r).data_src),e=d(s,e.data_bg),r&&(s.style.backgroundImage='url("'.concat(r,'")')),e&&(s.style.backgroundImage=e)}(e,t),i(e,"was-processed","true"),p(s.callback_reveal,e),p(s.callback_set,e))},x=["IMG","IFRAME"];e.prototype={update:function(e){var t,a=this,s=this._settings;this._elements=k(e,s),!_&&this._observer?(s.use_native&&"loading"in HTMLImageElement.prototype&&((t=this)._elements.forEach(function(e){-1!==x.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),U(e,t))}),this._elements=k(e,s)),this._elements.forEach(function(e){a._observer.observe(e)})):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,t){U(e,this,t)},loadAll:function(){var t=this;this._elements.forEach(function(e){y(e,t)})}},t&&function(e,t){if(t)if(t.length)for(var a,s=0;a=t[s];s+=1)r(e,a);else r(e,t)}(e,N.lazyLoadOptionsStamped)}();function E(e,t){t?(je("Using included jQ"),L=t,je(N.jQueryStamped=L)):(je("Loaded jQ"),N.jQueryStamped=L),/msie/.test(N.navigator.userAgent.toLowerCase())&&(L.support.cors=!0),1!=q.exclude_font&&L("head").append(L("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"}));t=Fe("stamped_referral_code")||Fe("stamped_ref");t&&(Le("stamped_referral_code",{code:t}),q.referral_code=t);t=qe("stamped_referral_code");t&&t.code&&(q.referral_code=t.code),je("Library Starting..."),L.isReady?U():L(F).ready(function(){U()}),setTimeout(function(){s||(je("Library not started, fallback"),U())},3e3)}function U(){s||(je("Started library"),We("stamped:init:starting"),x(),G()),s=!0}function x(){if(je("Starting UGC..."),(_=L(S)).length){if(L.trim(_.html())){ee(),oe(),re(),se(),X(),ie();try{N.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}}else Z();L(F).on("click keypress",".stamped-summary-ratings .summary-rating",function(e){var t,a;!0===j(e)&&(a=(t=L(this).find(".summary-rating-bar")).attr("data-rating"),e=t.hasClass("selected"),L(".stamped-summary-ratings .summary-rating").each(function(){L(this).removeClass("selected")}),L(".summary-rating-bar").each(function(){L(this).removeClass("selected")}),a&&(e?(Ee(1),L(".stamped-summary-ratings").removeClass("selected")):(t.addClass("selected"),L(this).addClass("selected"),L(".stamped-summary-ratings").addClass("selected"),Ee(1,a))))}),L(F).on("mouseover mouseout",".stamped-form-review-rating a.fa",function(e){var t=e.currentTarget,a=L(t).attr("data-value"),t=L(t).parent();"mouseover"===e.type?(t.find("a.fa:lt("+a+")").removeClass("fa-star-o").addClass("fa-star"),t.find("a.fa:gt("+(a-1)+")").removeClass("spr-icon-star-hover").addClass("fa-star-o")):t.find("a.fa").removeClass("fa-star").addClass("fa-star-o")}),L(F).on("click keypress",".stamped-tabs li",function(e){!0===j(e)&&ue(this)}),L(F).on("keypress",".stamped-summary-actions-newreview",function(e){!0===j(e)&&Ce("review")}),L(F).on("keypress",".stamped-summary-actions-newquestion",function(e){!0===j(e)&&Ce("review")}),L(F).on("keypress",".stamped-form-input a",function(e){!0===j(e)&&Ie(this)}),e="#shopry-rating-wrapper a.shopry-thumbs-up, #shopry-rating-wrapper a.shopry-thumbs-down, #shopry-rating-holder a.shopry-thumbs-up, #shopry-rating-holder a.shopry-thumbs-down, #stamped-rating-holder a.stamped-thumbs-up, #stamped-rating-holder a.stamped-thumbs-down, .stamped-rating-holder a.stamped-thumbs-up, .stamped-rating-holder a.stamped-thumbs-down",L(F).off("click keypress",e).on("click keypress",e,function(e){var t,a,s,r,i,d;!0===j(e)&&(t=L(this).attr("data-review-id"),a=L(this).attr("data-question-id"),s=L(this).attr("data-rating"),r=_.attr("data-product-id"),i=L(this),(d=i.parent()).fadeTo("slow",.3),i.addClass("disable-link"),e=t?"reviews":"questions",L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/"+e+"/vote",data:{productId:r,reviewId:t,questionId:a,vote:s,apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl},success:function(e){L(".stamped-thumbs-up i",d).html("&nbsp; "+e.voteUp),L(".stamped-thumbs-down i",d).html("&nbsp; "+e.voteDown),d.fadeTo("slow",1),i.removeClass("disable-link")}}))}),e=".stamped-share-button, .stamped-share-icon",L(F).off("click keypress",e).on("click keypress",e,function(e){!0===j(e)&&L(this).parent().find(".stamped-share-links").fadeToggle()}),L(F).on("click keypress",".stamped-summary-actions-mobile-filter",function(e){!0===j(e)&&((e=L(".stamped-filters-wrapper")).hasClass("stamped-mobile-visible")?(e.slideUp(),e.removeClass("stamped-mobile-visible")):(e.slideDown(),e.addClass("stamped-mobile-visible")))}),L(F).on("click keypress",".stamped-summary-keywords-list li",function(e){!0===j(e)&&((e=L(this)).hasClass("selected")?(L(".stamped-summary-keywords-list li").removeClass("selected"),L(_).removeAttr("data-keyword")):(L(".stamped-summary-keywords-list li").removeClass("selected"),e.addClass("selected"),L(_).attr("data-keyword",e.text().trim())),L(".stamped-summary-actions-clear").show(),Ee(1))}),L(F).on("change keyup",".stamped-reviews-search-input",function(e){var t=L(this).val();t?(L(".stamped-reviews-search-clear").show(),L(".stamped-reviews",_).attr("data-filtered","true")):(L(".stamped-reviews-search-clear").hide(),L(".stamped-reviews",_).removeAttr("data-filtered")),13==e.keyCode&&(t=L(this).val())&&(L(_).attr("data-search",t.trim()),L(".stamped-summary-actions-clear").show(),de(),Ee(1))}),L(F).on("click keypress",".stamped-reviews-search-button",function(e){var t;!0!==j(event)||(t=L(".stamped-reviews-search-input").val())&&(L(_).attr("data-search",t.trim()),L(".stamped-summary-actions-clear").show(),de(),Ee(1))}),L(F).on("click keypress",".stamped-reviews-search-clear",function(e){!0===j(e)&&(L(".stamped-reviews-search-clear").hide(),L(".stamped-reviews-search-input").val(""),L(_).removeAttr("data-search"),Ee(1))}),L(F).on("click keypress",".stamped-summary-actions-clear",function(e){!0===j(e)&&Ue(L(this).data("type"))}),L(F).on("change keyup",".stamped-questions-search-input",function(e){var t=L(this).val();t?(L(".stamped-questions-search-clear").show(),L(".stamped-questions",_).attr("data-filtered","true")):(L(".stamped-questions-search-clear").hide(),L(".stamped-questions",_).removeAttr("data-filtered")),13==e.keyCode&&(t=L(this).val())&&(L(_).attr("data-search-qna",t.trim()),L(".stamped-summary-actions-clear").show(),Oe())}),L(F).on("click keypress",".stamped-questions-search-button",function(e){var t;!0!==j(event)||(t=L(".stamped-questions-questions-input").val())&&(L(_).attr("data-search-qna",t.trim()),L(".stamped-summary-actions-clear").show(),Oe())}),L(F).on("click keypress",".stamped-questions-search-clear",function(e){!0===j(e)&&(L(".stamped-questions-search-clear").hide(),L(".stamped-questions-search-input").val(""),L(_).removeAttr("data-search-qna"),Oe())}),L(F).one("stamped:reviews:loaded",function(){je("Main Widget event triggered reload once"),ee(),oe(),re(),ie(),Fe("write_review")&&Ce("review"),Fe("write_question")&&Ce("question")}),L(F).on("stamped:reviews:loaded",function(e){je("Main Widget event triggered reload"),b=[],se(),X();try{N.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}})}L(F).one("stamped:launcher:loaded",function(e){var t=Fe("rewards-launcher");L(N).on("hashchange",function(){0<=location.hash.indexOf("stamped-rewards")&&D()}),t&&("open"==t&&D(),-1<t.indexOf("view-")&&(D(!0),$(t)))}),te(),ae();var e=Fe("stamped_r_id");e&&1!=q.disable_single_review&&(e=e,L.ajax({type:"GET",url:q.SECURE_ENDPOINT+"/widget/reviews",data:{reviewIds:e,apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,type:"single",showAvatar:"True",minRating:1},success:function(e){e.data&&StampedFn.openUGCModal([e.data],0,F,1,!1,0)},error:function(e){}}))}function G(e){je("Starting Rewards...");var t=L("#stamped-rewards-init");if(e&&e.customer)return je("Started Rewards with direct data"),I=e,void P();e?(je("Started Rewards with JS data"),I.customer=e,A()):0<t.length?(je("Started Rewards with div data"),I.customer={customerId:t.data("customer-id"),customerEmail:t.data("customer-email"),customerFirstName:t.data("customer-first-name"),customerLastName:t.data("customer-last-name"),customerTags:t.data("customer-tags"),customerLocale:t.data("customer-locale"),totalOrders:0,totalSpent:t.data("customer-total-spent"),isAcceptMarketing:t.data("customer-accepts-marketing"),authToken:t.data("key-auth")},A()):je("Started Rewards no init customer data")}function A(){je("Loading Rewards API init...");var e=q.metafields||"";I&&I.customer&&e&&(I.customer.metafields=e);var t=JSON.stringify(I.customer),e=q.is_test;L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/init?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,debug:null,isTest:e,isPreview:q.is_preview,referralCode:q.referral_code}),xhrFields:{withCredentials:!0},data:t,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e,t,a){We("stamped:rewards:init"),I=e,P()}})}function P(){var e,t,a,s,r,i,d;L("#stamped-rewards-init").length||((s=F.createElement("div")).setAttribute("id","stamped-rewards-init"),F.body.appendChild(s)),I&&I.html&&((n=L("#stamped-rewards-init")).html(I.html.main),function(){p=L(".stamped-rewards-launcher",n),c=L(".stamped-launcher-button",n),h=L("<iframe>");var s=c.html();je("Func _buildIframeLauncher: width:"+c.width(),1),je("Func _buildIframeLauncher: outerWidth:"+c.outerWidth(),1),je("Func _buildIframeLauncher: var launcherWidth:"+(w=c.width()+40),1),c.width(w),c.html(h),p.hide(),setTimeout(function(){g=h[0].contentWindow.document,h[0].contentWindow.StampedFn=StampedFn,h[0].contentWindow.jQuery=jQuery;var e,t=L("body",g),a=L("head",g);t.html(s),t.append(L("#stamped-rewards-main-css",n).clone()),a.append(L("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/rewards-launcher.min.css",type:"text/css"})),0!=q.includes_options.rewards_button_js&&((e=g.createElement("script")).type="text/javascript",e.src="//kit.fontawesome.com/59de3073ed.js",e.setAttribute("data-observe-mutations","true"),g.body.appendChild(e)),a.append("<style>"+T+' body { overflow:hidden; } .stamped-launcher-icon-opened { font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; display:inline-block; width: 100%; margin-top: -2px; text-align:center;}</style>'),O()&&t.attr("data-mobile",!0),m=L(".stamped-launcher-icon-closed",t),u=L(".stamped-launcher-icon-opened",t),setTimeout(function(){p.fadeIn()},800)},800)}(),function(){o=L(".stamped-rewards-base",n),$launcherCss=L("#stamped-rewards-main-css",n).clone(),v=L("<iframe>");var s=o.html();o.html(v),setTimeout(function(){f=v[0].contentWindow.document,v[0].contentWindow.StampedFn=StampedFn,v[0].contentWindow.jQuery=jQuery;var e=L("body",f),t=L("head",f);e.html(s),e.append(L("#stamped-rewards-main-css",n).clone()),t.append(L("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/rewards-main.min.css",type:"text/css"})),1!=q.exclude_font&&t.append(L("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"})),t.append("<script>window.FontAwesomeConfig = { searchPseudoElements: true };<\/script>");var a,t=f.createElement("script");t.type="text/javascript",t.src="//kit.fontawesome.com/59de3073ed.js",t.setAttribute("data-observe-mutations","true"),t.setAttribute("data-search-pseudo-elements","true"),f.body.appendChild(t),e.append("<style>"+T+' .stamped-rewards-window { font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; }</style>'),O()&&e.attr("data-mobile",!0),I.customer&&I.customer.customerEmail?e.attr("data-logged-in",!0):e.attr("data-logged-in",!1),1==I.branding&&e.attr("data-branding",!0),$wrapperCards=L("#stamped-rewards-cards",f),$wrapperViews=L("#stamped-rewards-views",f),L(f).on("click",".stamped-rewards-header-close",function(){D()}),L(F).on("touchstart",function(){a=!0}),L(F).on("touchmove",function(){a=!1}),L(F).on("click touchend",function(e){var t;"click"===e.type&&(a=!0),a&&("stamped-rewards-init"===e.target.id||L(e.target).parents("#stamped-rewards-init").length||L(e.target).parents(".stamped-rewards-base").length||L(e.target).parents(".stamped-rewards-launcher").length||L(e.target).parents("#stamped-rewards-widget").length||(t=L(".stamped-rewards-base",n).hasClass("opened"),setTimeout(function(){t&&StampedFn.toggleLauncher()},300)))}),L(f).on("click",'[data-campaign-completed="false"] .stamped-reward-card-button-earn',function(){var e,t,a,s,r=L(this).parent(".stamped-rewards-card-earn"),i=L(this),d=r.data("campaign-id"),n=r.data("event-type");"AccountBirthday"==n?((e=L(".stamped-rewards-birthday-input-holder",f)).show(),t=L(".stamped-rewards-birthday-input-holder select.DOBDay option:checked",f).val(),a=L(".stamped-rewards-birthday-input-holder select.DOBMonth option:checked",f).val(),s=L(".stamped-rewards-birthday-input-holder select.DOBYear option:checked",f).val(),t&&a&&s&&(Y(i,"loading",!0),H({campaignId:d,campaignEventType:n,birthday:s+"-"+a+"-"+t,callback:function(){Y(i,"active",!0,null,function(){r.attr("data-campaign-completed","true")}),e.hide()}}))):"Review"==n||"ReviewPhoto"==n||"ReviewVideo"==n?(L('.stamped-rewards-header-menu span[data-target="reviews"]',f).trigger("click"),$("main")):(Y(i,"loading",!0),H({campaignId:d,campaignEventType:n,callback:function(){Y(i,"active",!0,null,function(){r.attr("data-campaign-completed","true")})}}))}),L(f).on("click",'[data-campaign-redeemable="true"] .stamped-reward-card-button-spend',function(){var t=L(this),e=t.parent(".stamped-rewards-card-spend"),a=e.data("campaign-id");"Variable"==e.data("coupon-type")?$("view-redeem-variable",null,{entityId:a}):(Y(t,"loading",!0),Q({campaignId:a,callback:function(e){$("view-coupon",null,e.rewardCampaignCoupon),Y(t,"active",!0,1)}}))}),L(f).on("click",".stamped-reward-referral-platforms button",function(){var e=L(this).attr("href");e&&(e=e,N.open(e,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"))}),L(f).on("click",".stamped-rewards-header-menu span",function(){var e=L(this).attr("data-target");e!=$wrapperCards.attr("data-target")&&($wrapperCards.attr("data-target",e),M(e),L(".stamped-rewards-content-container",f).scrollTop(0),L(".stamped-rewards-header-menu .active",f).removeClass("active"),L(this,f).addClass("active"))}),L(".stamped-rewards-content-container",f).on("scroll",function(){var e=L(".stamped-rewards-content-container",f).scrollTop();if(e<=1)return L(".stamped-rewards-background",f).height("200px"),void L(".stamped-rewards-header",f).height("auto");var t=L(".stamped-rewards-header-content",f).outerHeight()+15;L(".stamped-rewards-header",f).css("min-height","70px");var a=200-e;L(".stamped-rewards-background",f).height(a);t-=e,L(".stamped-rewards-header",f).height(t)}),M("rewards"),We("stamped:launcher:loaded")},1e3)}(),(d=I).points&&(e=d.points.points,L("[id=stamped-rewards-points-placeholder]").attr("onclick","StampedFn.toggleRewardsModal();"),L("[id=stamped-rewards-points-placeholder]").html(d.points.points_current_with_name),L('[id=stamped-rewards-points-placeholder][data-type="points-only"]').html(e),(t=L('[id=stamped-rewards-points-placeholder][data-type="points-price"]')).length&&0<=e&&(a=t.attr("data-ratio"),s=t.attr("data-symbol"),a&&parseInt(a)&&(a=0<e?(e/a).toFixed(2):0,t.html(s+a)))),d.customer&&L("[id=stamped-rewards-referral-placeholder]").html(d.customer.urlReferral),0<L("#stamped-rewards-widget").length&&(r=[],i=1,L("[id=stamped-rewards-widget]").each(function(e){var t=L(this);t.attr("data-element-id",i);t=ve(t);r.push(t),i++}),fe("rewards",r)))}function D(e){var t=o.hasClass("opened");L("body",f).addClass("opened"),t?1!=e&&(je("Func _toggleRewardsModal: var launcherWidth:"+w,1),o.removeClass("opened"),o.fadeOut(),p.removeClass("opened"),m.removeClass("rotateIn"),u.removeClass("fadeOut"),u.addClass("fadeIn"),c.animate({width:w+"px"},0),setTimeout(function(){$("main")},1e3),We("stamped:launcher:closed")):(setTimeout(function(){o.addClass("opened")},100),p.addClass("opened"),o.fadeIn(),m.addClass("rotateIn"),m.removeClass("rotateOut"),u.addClass("fadeOut"),u.removeClass("fadeIn"),c.animate({width:"40px"},0),L(".stamped-rewards-content-container",f).scrollTop(0),L(".stamped-rewards-header",f).css("height","auto"),We("stamped:launcher:opened"),"true"!=be("stamped-launcher-opened")&&(L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/tracking/event?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,source:"launcher",event:"open"}),dataType:"json",success:function(e,t,a){}}),ye("stamped-launcher-opened",!0,1)))}function K(e,t,a){var s=e.search,r=e.customOptionTitle?e.customOptionTitle+"||"+e.customOptionValue:"",e=e.topic,s=s||e||r,r=e?3:r?2:1;L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/tracking/event?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,event:"search",source:"m"}),data:JSON.stringify({source:"m",sourceId:t,type:r,text:s,results:a}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e,t,a){}})}function z(s){L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/points?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl}),data:I.customer,dataType:"json",success:function(e,t,a){setTimeout(function(){L(".stamped-rewards-header-main-points, .stamped-rewards-header-small-points",f).html(e.points_current_with_name)},5e3),s&&s(e)}})}function W(s){return s=s||{},I||I.customer||console.log("Customer not logged in to create reward activity"),L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/add?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,campaignId:s.campaignId}),data:I.customer,dataType:"json",success:function(e,t,a){s.callback&&s.callback(e,t,a),z()}})}function M(e){$wrapperCards.html(""),L("body",f).attr("data-view",e);for(var t=0;t<I.html.cards.length;t++){var a,s=I.html.cards[t];s&&s.html&&e==s.type&&((a=L(s.html)).attr("data-key",s.key),$wrapperCards.append(a))}}function $(s,e,r){l=L(".stamped-rewards-window",f),L(".stamped-rewards-content-container",f).scrollTop(0),L(".stamped-rewards-header-nav",f).attr("onclick","StampedFn.loadLauncherView('main');"),L("body",f).attr("data-view",s);var i=L(e).attr("data-title");if(l)if("main"==s){l.removeClass("stamped-rewards-nav-small"),l.addClass("stamped-rewards-nav-big"),L(".stamped-rewards-header-main, .stamped-rewards-header-menu",f).fadeIn(),L(".stamped-rewards-header-small",f).hide();var t=L(".stamped-rewards-header-content",f).outerHeight()+15;L(".stamped-rewards-header",f).height(t),L(".stamped-rewards-background",f).height("200"),$wrapperViews.hide(),$wrapperCards.fadeIn()}else{var a=!1;if(r&&1==r.reload)a=!1;else if("view-redeem-variable"==s)a=!1;else for(var d=0;d<I.html.views.length;d++){var n=I.html.views[d];n.key==s&&(n.title&&(i=n.title),a=!0,V(n.html),B(s,i,r))}a||(V(),B(s,i,r),e=null,r&&r.entityId&&(e=r.entityId),t=q.is_test,L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/cardview?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,viewKey:s,entityId:e,referralCode:q.referral_code,isTest:t}),data:I.customer,dataType:"json",success:function(e,t,a){e&&e.html?(I.html.views.push(e),setTimeout(function(){V(e.html,!1),B(s,e.title||i,r)},1e3)):$("main")},error:function(){$("main")}}))}}function V(e,t){e?(e=L(e),$wrapperViews.html(e),$wrapperViews.removeClass("loading")):($wrapperViews.html(""),L(".stamped-view-loader",$wrapperViews).length||$wrapperViews.append(L('<div class="stamped-view-loader"></div>')),$wrapperViews.addClass("loading")),0!=t&&(l.addClass("stamped-rewards-nav-small"),l.removeClass("stamped-rewards-nav-big"),L(".stamped-rewards-header-main, .stamped-rewards-header-menu",f).hide(),L(".stamped-rewards-header-small",f).fadeIn(),$wrapperCards.hide(),$wrapperViews.fadeIn())}function B(e,t,a){var s,r,i,d,n,o=(a?a.viewTitle:t)||t;function l(){var e=$selectorInput.val(),t=e/d*n,a=new Intl.NumberFormat("en-US",{style:"currency",currency:i});L("#redeem-points",$wrapperViews).text(s.formatStringStamped(e,r)),L("#redeem-amount",$wrapperViews).text(a.format(t))}"view-coupon"==e&&(L(".stamped-reward-coupon-code",$wrapperViews).text(a.couponCode),L(".stamped-reward-card-title",$wrapperViews).html(a.title),L(".stamped-rewards-header-nav",f).attr("onclick","StampedFn.loadLauncherView('view-your-rewards', null, { reload: true});")),"view-earnings"==e&&I&&I.customer&&((t=L('[data-event-type="AccountBirthday"]',f)).length&&(I.customer.dateBirthday?t.attr("data-birthday","true"):(t.attr("data-birthday","false"),t.prepend(L(".stamped-rewards-birthday-input-holder",f))))),"view-redeem-variable"==e&&($selectorInput=L(".range-slider__range",$wrapperViews),$selectorInput.length&&(s=$selectorInput.data("format-points"),r=$selectorInput.data("format-points-name"),i=$selectorInput.data("currency"),d=$selectorInput.attr("step"),n=$selectorInput.data("discount-value"),$selectorInput.on("input",function(){l()}),L(".stamped-rewards-content-action-button ",$wrapperViews).on("click",function(){var e,t;e=this,t=$selectorInput.val(),t={campaignId:a.entityId,points:t},StampedFn.rewardsRedeem(L(e),t,function(e){var t=e.rewardCampaignCoupon.couponCode,e=e.rewardCampaignCoupon.title;$("view-coupon",null,{couponCode:t,title:e,viewTitle:e})})}),l())),o&&(o=o,L(".stamped-rewards-header-small-title",f).text(o))}function H(e){var s,t=(e=e||{}).campaignEventType;"AccountBirthday"==t?(s=(s=e)||{},L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/addBirthday?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,dateBirthday:s.birthday}),data:I.customer,success:function(e,t,a){s.callback&&s.callback()}})):"SocialFollowInstagram"!=t&&"SocialFollowFacebook"!=t&&"SocialShareFacebook"!=t&&"SocialFollowTwitter"!=t&&"SocialShareTwitter"!=t&&"SocialYouTube"!=t&&"SocialFollowTiktok"!=t&&"SocialShareTiktok"!=t&&"SocialFollowPinterest"!=t||(W({campaignId:e.campaignId,callback:e.callback}),e=I.links,"SocialFollowInstagram"==t?N.open(e.instagram,"_blank").focus():"SocialFollowFacebook"==t?N.open("https://www.facebook.com/plugins/page.php?href="+e.facebook,"_blank","location=yes,height=250,width=340,top=50,left=50,scrollbars=yes,status=yes"):"SocialShareFacebook"==t?N.open("https://www.facebook.com/sharer/sharer.php?u="+e.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"):"SocialFollowTwitter"==t?N.open(e.twitter,"_blank").focus():"SocialShareTwitter"==t?N.open("https://twitter.com/intent/tweet?url="+e.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"):"SocialYouTube"==t?N.open(e.youtube,"_blank"):"SocialFollowTiktok"==t||"SocialShareTiktok"==t?N.open(e.tiktok,"_blank"):"SocialFollowPinterest"==t&&N.open(e.pinterest,"_blank"))}function Q(e){var s;s=(s={campaignId:(e=e||{}).campaignId,callback:e.callback})||{},L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/redeem?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,campaignId:s.campaignId,points:s.points}),data:I.customer,dataType:"json",success:function(e,t,a){s.callback&&s.callback(e),z()}})}function J(e){var t=L("#stamped-rewards-apply-code",f);"active"==e&&L(".stamped-rewards-coupons-view",f).attr("data-applied","true"),Y(t,e)}function Y(t,e,a,s,r){"loading"==e?(e=t.width(),t.attr("data-original-text",t.text()),t.addClass("stamped-button-disabled"),10<=e&&t.width(e),t.html('<span class="stamped-button-icon stamped-button-loading"></span>')):(a||t.html('<span class="stamped-button-icon stamped-button-completed"></span>'),setTimeout(function(){var e=t.attr("data-original-text");t.html(e),t.removeClass("stamped-button-disabled"),t.width("auto"),r&&r()},s||7878))}function X(){je("Func initWidgetType");var e,t,a=L(".stamped-container",_).attr("data-widget-style");"slider"==a?(je(r=L(".stamped-reviews",_),1),je("Func initWidgetType: var initialized:"+(e=r&&r.hasClass("slick-initialized")),1),e?(r.slick("slickAdd",L(".stamped-reviews > .stamped-review")),L('.stamped-reviews [class*="stamped-review"]',_).length<=0?L("button.slick-arrow").hide():L("button.slick-arrow").show()):Ne("//cdn.stamped.io/cdn/js/slick.min.js",function(){r.slick(q.slick_options),r.on("afterChange",function(e,t,a){L(".slick-next.slick-arrow").hasClass("slick-disabled")&&(_lastSlide=a,(a=L(".stamped-pagination .next a")).length&&a.click())})})):"masonry"==a&&(t={1500:4,1200:3,700:2,500:2},N.macyInstanceConfig&&N.macyInstanceConfig.breakAt&&(t=N.macyInstanceConfig.breakAt),Ne("//cdn.stamped.io/cdn/js/macy2.js",function(){N.macyInstanceStamped=Macy({container:".stamped-reviews",margin:{x:15,y:15},breakAt:t}),We("stamped:macy:loaded")})),!L(".stamped-sort-select").length||(a=_.attr("data-sort")||L(".stamped-container",_).attr("data-widget-sort"))&&"none"!==L('.stamped-sort-select option[value="'+a+'"]').css("display")&&L(".stamped-sort-select").val(a)}function Z(e){_&&_.length&&!e||(_=L(S)),pe()}function ee(){je("Creating Q&A"),me()}function te(){var e;je("Loading Badges..."),!(t=L(".stamped-product-reviews-badge[data-id], .stamped-product-reviews-badge[data-product-id]")).length||(e=L.map(t,function(e){if(!L.trim(L(e).html())&&(L(e).attr("data-id")||L(e).attr("data-product-id")||L(e).attr("data-type")||L(e).attr("data-product-type")||L(e).attr("data-product-sku")||L(e).attr("data-product-title")))return{productId:L(e).attr("data-id")||L(e).attr("data-product-id"),productType:L(e).attr("data-product-type"),productSKU:L(e).attr("data-product-sku")||L(e).attr("data-product-sku2"),productTitle:L(e).attr("data-product-title")}}))&&e.length&&L.ajax({type:"POST",dataType:"json",contentType:"application/json",url:q.SECURE_ENDPOINT+"/widget/badges"+(!0===q.is_disable_cache_badge?"?isUseCache=false":""),data:JSON.stringify({productIds:e,apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl}),success:function(r){t.each(function(e){var a=L(this).attr("data-id")||L(this).attr("data-product-id"),t=L(this).attr("data-type"),s=L.map(r,function(e,t){if(e.productId==a)return t})[0];0<=s&&(!t||"review"==t)?L(this).html(r[s].badge):0<=s&&"qna"==t&&L(this).html(r[s].badgeqna)}),We("stamped:badges:loaded")},error:function(e){}}),L(".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first").length&&L(F).on("click",".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first",function(){"qna"===L(this).attr("data-type")?(L("#stamped-questions-placeholder").length?_e("#stamped-questions-placeholder"):(ue(null,"questions"),_e(S)),L(".stamped-badge-caption[data-questions]").length&&"0"===L(".stamped-badge-caption[data-questions]").attr("data-questions")&&L(".new-question-form").show()):(ue(null,"reviews"),_e(S))})}function ae(){var a,s,e=L("#stamped-reviews-widget").length;je("Creating display widgets "+e+" found"),We("stamped:widget:reloading"),0<e&&(a=[],s=1,L("[id=stamped-reviews-widget]").each(function(e){var t=L(this);t.attr("data-element-id",s);t=ve(t);a.push(t),s++}),fe("ugc",a))}function se(){var r=L(_).attr("data-limit-words")||L(".stamped-container",_).attr("data-widget-limit-words"),i=L(_).attr("data-keyword"),d=L(_).attr("data-search");(r&&0<r||i||d)&&L(".stamped-review",_).each(function(e){var t,a,s=L(".stamped-review-content-body:first",this);!s.length||(t=L(s).html()).indexOf("stamped-review-read-more")<=-1&&(i||d?(i&&(a=ce(t,i)),d&&(a=ce(t,d)),L(s).html(a)):(a=t.split(" ")).length>r&&(txtTrimmed=a.slice(0,r).join(" ")+"...",L(s).html(txtTrimmed),L(s).append('<a class="stamped-review-read-more" style="margin-left:10px; cursor:pointer;">read more</span>'),L(s).append('<span class="original-review" style="display:none !important;">'+t+"</span>")))}),L(".stamped-review-reply .stamped-review-reply-body, .stamped-review-reply .stamped-review-content-body").each(function(){var e;L(this).attr("data-link-processed")||(L(this).attr("data-link-processed",!0),e=L(this).html(),L(this).html(e.linkify()))})}function re(){var e=L(_).attr("data-keywords");if(e){L(".stamped-reviews-filter-label").show(),L(".stamped-summary-keywords").show(),L(_).removeAttr("data-keywords"),L(".stamped-summary-keywords-list",_).html("");var t="",a=e.split(",");for(i=0;i<a.length;i++)t+="<li>"+a[i]+"</li>";L(t).appendTo(L(".stamped-summary-keywords-list",_))}}function ie(){L(F).on("click keypress",".stamped-review-read-more",function(e){!0===j(e)&&(L(this).closest(".stamped-review-content-body").find(".stamped-review-read-more").hide(),e=L(this).closest(".stamped-review-content-body").find(".original-review").html(),L(this).closest(".stamped-review-content-body").html(e),N.macyInstanceStamped&&N.macyInstanceStamped.reInit())})}function de(){L(".stamped-summary-ratings").removeClass("selected"),L(".stamped-summary-ratings .summary-rating").each(function(){L(this).removeClass("selected")}),L(".summary-rating-bar").each(function(){L(this).removeClass("selected")})}Ke=void 0!==N?N:this,ze=function(){function a(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(i(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e))}function i(e){return parseInt(e)}function n(e,t,a){t=p[t]?t:p[a]?a:"en";for(var s=0,r=e<0?1:0,a=e=Math.abs(e);c[s]<=e&&s<6;s++)e/=c[s];return(0===(s*=2)?9:1)<(e=i(e))&&(s+=1),p[t](e,s,a)[r].replace("%s",e)}function o(e,t){return((t=t?a(t):new Date)-a(e))/1e3}function d(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0}function s(e,t){this.nowDate=e,this.defaultLocale=t||"en"}function e(e,t){return new s(e,t)}var r="second_minute_hour_day_week_month_month".split("_"),l="秒_分钟_小时_天_周_月_年".split("_"),p={en:function(e,t){if(0===t)return["just now","right now"];t=r[parseInt(t/2)];return 1<e&&(t+="s"),[e+" "+t+" ago","in "+e+" "+t]},zh_CN:function(e,t){if(0===t)return["刚刚","片刻后"];t=l[parseInt(t/2)];return[e+t+"前",e+t+"后"]}},c=[60,60,24,7,365/7/12,1],m="datetime",u="data-tid",h={};return s.prototype.doRender=function(e,t,a){var s,r,i=o(t,this.nowDate),d=this;e.innerHTML=n(i,a,this.defaultLocale),h[s=setTimeout(function(){d.doRender(e,t,a),delete h[s]},Math.min(1e3*function(e){for(var t=1,a=0,s=Math.abs(e);c[a]<=e&&a<6;a++)e/=c[a],t*=c[a];return s=(s%=t)?t-s:t,Math.ceil(s)}(i),2147483647))]=0,r=s,(i=e).setAttribute?i.setAttribute(u,r):i.attr&&i.attr(u,r)},s.prototype.formatDateString=function(e,t){return n(o(e,this.nowDate),t,this.defaultLocale)},s.prototype.render=function(e,t){void 0===e.length&&(e=[e]);for(var a,s=0,r=e.length;s<r;s++)this.doRender(e[s],(a=e[s]).dataset.timeagoStamped||d(a,m),t)},s.prototype.setLocale=function(e){this.defaultLocale=e},e.register=function(e,t){p[e]=t},e.cancel=function(e){if(e)(t=d(e,u))&&(clearTimeout(t),delete h[t]);else{for(var t in h)clearTimeout(t);h={}}},e},"object"==typeof module&&module.exports?(module.exports=ze(),module.exports.default=module.exports):Ke.timeagoStamped=ze();var ne=0;function oe(){var s,u;function h(e,t,a){a=function(e,t){for(var a=e.split(","),e=a[0].match(/:(.*?);/)[1],s=atob(a[1]),r=s.length,i=new Uint8Array(r);r--;)i[r]=s.charCodeAt(r);return new File([i],t,{type:e})}(e,a);y.push(a)}N.File&&N.FileReader&&N.FormData?((s=L("#stamped-file-uploader-input")).on("change",function(e){for(var t=e.target.files,a=0;a<t.length;a++){var d=t[a],n=new FileReader;if(We("stamped:photo:selected"),5<=ne)return void We("stamped:photo:maxed");ne++,d.type.match("image")?function(a,s){!function(e,o){var t=new FileReader;t.onload=function(e){var t=new DataView(e.target.result);if(65496!=t.getUint16(0,!1))return o(-2);for(var a=t.byteLength,s=2;s<a;){var r=t.getUint16(s,!1);if(s+=2,65505==r){if(1165519206!=t.getUint32(s+=2,!1))return o(-1);var i=18761==t.getUint16(s+=6,!1);s+=t.getUint32(s+4,i);var d=t.getUint16(s,i);s+=2;for(var n=0;n<d;n++)if(274==t.getUint16(s+12*n,i))return o(t.getUint16(s+12*n+8,i))}else{if(65280!=(65280&r))break;s+=t.getUint16(s,!1)}}return o(-1)},t.readAsArrayBuffer(e.slice(0,65536))}(a,function(e){u=e});var r=new FileReader;r.onloadend=function(){var p,c,e,t,m;p=r.result,c=a.type,e=a.name,t=s,(m=new Image).src=p,m.onload=function(n,o,l){setTimeout(function(){var e,t,r,i,d,a=m.width,s=m.height;1500<a||1500<s?(s<a?(t=s*(1500/a),e=1500):(e=a*(1500/s),t=1500),(s=F.createElement("canvas")).width=e,s.height=t,s.getContext("2d").drawImage(o,0,0,e,t),p=s.toDataURL(c),L(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+n+'"><img src="'+p+'" width="70" /><span style="display:none;">'+l+'</span><div class="stamped-file-photo-remove" data-index="'+n+'">x</div></div>'),u&&1!=u?(s=p,r=u,i=function(e){p=e,console.log(u),h(p,0,l)},(d=new Image).onload=function(){var e=d.width,t=d.height,a=F.createElement("canvas"),s=a.getContext("2d");switch(4<r&&r<9?(a.width=t,a.height=e):(a.width=e,a.height=t),r){case 2:s.transform(-1,0,0,1,e,0);break;case 3:s.transform(-1,0,0,-1,e,t);break;case 4:s.transform(1,0,0,-1,0,t);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,t,0);break;case 7:s.transform(0,-1,-1,0,t,e);break;case 8:s.transform(0,-1,1,0,0,e)}s.drawImage(d,0,0),i(a.toDataURL())},d.src=s):h(p,0,l)):(L(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+n+'"><img src="'+p+'" width="70" /><span style="display:none;">'+l+'</span><div class="stamped-file-photo-remove" data-index="'+n+'">x</div></div>'),h(p,0,l))},100)}(t,m,e),m.onerror=function(){console.log("There was an error processing your file!")}},r.onerror=function(){console.log("There was an error reading the file!")},r.readAsDataURL(a)}(d,ne):(n.onload=function(){var e=new Blob([n.result],{type:d.type}),a=URL.createObjectURL(e),s=F.createElement("video"),t='<div class="stamped-file-photo" data-index="'+ne+'"><img src="https://s3-us-west-2.amazonaws.com/stamped.io/cdn/images/icons/icon-video-placeholder.png" width="70" /><span style="display:none;">'+d.name+'</span><div class="stamped-file-photo-remove" data-index="'+ne+'">x</div></div>',r=function(){i()?(s.removeEventListener("timeupdate",r),s.pause()):L(".stamped-file-holder").append(t)};s.addEventListener("loadeddata",function(){i()?s.removeEventListener("timeupdate",r):L(".stamped-file-holder").append(t),y.push(d)});var i=function(){var e=F.createElement("canvas");e.width=s.videoWidth,e.height=s.videoHeight,e.getContext("2d").drawImage(s,0,0,e.width,e.height);var t=e.toDataURL(),e=1e5<t.length;return e&&(L(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+ne+'"><img src="'+t+'" width="70" /><span style="display:none;">'+d.name+'</span><div class="stamped-file-photo-remove" data-index="'+ne+'">x</div></div>'),URL.revokeObjectURL(a)),e};s.addEventListener("timeupdate",r),s.preload="metadata",s.src=a,s.muted=!0,s.playsInline=!0,s.play()},n.readAsArrayBuffer(d)),d&&(/^image\//i.test(d.type)||/^video\//i.test(d.type)?console.log("is image, begin upload"):(We("stamped:photo:invalid"),console.log("Not a valid image!")))}s.val("")}),L(F).on("click",".stamped-file-photo-remove",function(){var e=L(this).parent(".stamped-file-photo"),t=e.index();y.splice(t,1),ne=y.length,e.remove()})):console.log("File upload is not supported!")}var le=null;function pe(i,d,e,t){var a,s,r,n,o,l,p,c,m,u,h,g,v,f,w,y,b,S;_.length&&!k&&(je("Loading Main Widget..."),a=_.attr("data-product-id"),s=_.attr("data-product-ids"),r=_.attr("data-name"),n=_.attr("data-product-type"),o=_.attr("data-product-sku"),l=_.attr("data-user-reference"),p=_.attr("data-take-reviews"),c=_.attr("data-keyword"),m=_.attr("data-widget-language"),u=_.attr("data-widget-country-iso"),h=_.attr("data-widget-type"),g=_.attr("data-load-type")||L(".stamped-container",_).attr("data-widget-load-type"),v=_.attr("data-search"),f=_.attr("data-cache")||q.is_disable_cache||null,w=L(".stamped-container",_).attr("data-widget-style"),S=_.attr("data-tags-exclude"),b=_.attr("data-tags-include"),y=q.metafields,"slider"==w&&(g="continue"),r=r&&r.replace("!",""),d=d||(_.attr("data-sort")||L(".stamped-container",_).attr("data-widget-sort")),"continue"===g&&(t=!0),L("#stamped-main-widget-placeholder").length&&L("#stamped-main-widget-placeholder").append(_),k=!0,i&&!t&&_e(".stamped-reviews"),_.addClass("stamped-main-widget-loading"),S=L.param(Se({productId:a,productIds:s,productName:r,productType:n,productSKU:o,userReference:l,page:i||1,apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,take:p||5,sort:d,rating:e,keyword:c,widgetLanguage:m,widgetCountryIso:u,widgetType:h,search:v,isUseCache:f,tagsExclude:S,tagsInclude:b})),L.isEmptyObject(C)||(S+="&"+L.param(C)),S={type:(b=y.length)?"POST":"GET",data:b?JSON.stringify({metafields:y}):null,dataType:"json",url:q.SECURE_ENDPOINT+"/widget"+(b?"/preview":"")+"?"+S,success:function(e){je("Loaded Main Widget..."),k=!1,_.removeClass("stamped-main-widget-loading");var t,a=e.product,s=e.widget,r=L("#stamped-main-widget .stamped-container").length;L(".question-form-wrapper").clone(),L(".stamped-questions").clone();r||_.empty().html(a),t="function"==typeof L.parseHTML?L.parseHTML(s):L(s),0==L(".stamped-content",_).children().length?L(".stamped-content",_).append(L(t)):(e=L(".stamped-reviews",_),r=L('[class="stamped-review"]',t),("continue"!==g||1===i&&i)&&L('.stamped-reviews [class*="stamped-review"]',_).remove(),a=L(".stamped-pagination",t).attr("data-page",i),(s=L(".stamped-reviews .stamped-pagination",_)).length?L(r).insertBefore(s):L(r).appendTo(".stamped-reviews",_),t=L(".stamped-tabs",t),L(".stamped-tabs",_).replaceWith(t),a.length?s.length?s.replaceWith(a):e.append(a):s.remove()),d&&L(".stamped-sort-select",_).length&&"none"!==L('.stamped-sort-select option[value="'+d+'"]',_).css("display")&&(L(".stamped-sort-select",_).val(d),L(".stamped-container",_).attr("data-widget-sort",d),L(_).attr("data-sort",d)),L(".new-review-form").hide(),L(".new-question-form").hide(),We("stamped:reviews:loaded")},error:function(e){}},y.length&&(S.contentType="application/json"),null!=le&&le.abort(),le=L.ajax(S)),c&&K({topic:c},a),v&&K({search:v},a)}function ce(e,t){return e=e.replace(new RegExp(t+"(?!([^<]+)?<)","gi"),'<span class="stamped-keyword-highlight">$&</span>')}function me(i,d){var e,t,a,s,n,r,o;(_=L(S)).length&&(e=_.attr("data-product-id"),t=_.attr("data-product-sku"),a=_.attr("data-product-type"),s=_.attr("data-name"),n=_.attr("data-take-questions")||5,r=_.attr("data-search-qna"),d=d||(_.attr("data-sort-qna")||L(".stamped-container",_).attr("data-widget-sort-qna")),o=_.data("linkify")||!1,e&&(je("Loading Q&A"),L.ajax({type:"GET",url:q.SECURE_ENDPOINT+"/widget/questions",data:{productId:e,productSKU:t,productType:a,productTitle:s,page:i||1,apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,take:n||5,search:r,sort:d},success:function(e){var t,a,s,r;1==e.a&&L(".stamped-questions").length&&(a=e.result,t=e.t,r=e.form,e.p,e=e.avatar,L("#tab-questions").text(),L("#tab-questions").attr("data-count",t),r=r,L(".stamped-questions").length&&!L(".question-form-wrapper").length&&(r=L('<div class="question-form-wrapper">').html(r),L(".new-review-form").before(r)),r=L('<div class="stamped-questions">'),L(".stamped-questions").html(""),r.append(a),e&&(a=L(".stamped-review #stamped-review-avatar",r),s=L('<img src="'+e+'" width="100">'),a.html(s)),(s=L(".stamped-questions-placeholder")).length?(L(".stamped-questions",s).html(""),L(".stamped-questions",s).replaceWith(r),L(".stamped-questions",s).length||(L(".stamped-questions").appendTo(s),L(".stamped-questions").replaceWith(r)),L(".stamped-questions",s).show(),L("#tab-questions").hide(),L(".question-form-wrapper").prependTo(s),L(".stamped-summary-actions-newquestion").prependTo(s)):(L(".stamped-questions").replaceWith(r),i?L(".stamped-questions").show():L(".stamped-questions").hide()),function(e,t,a){var s=!(0<e)||e/a<1?1:Math.ceil(e/a);if(1!=s){var r='<div class="stamped-pagination" id="stamped-pagination-question"><div><span id="stamped-pagination-prev" class="previous"><a onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+(t-1)+'"><</a></span><span id="pages"></span><span id="stamped-pagination-next" class="next"><a onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+(t+1)+'">></a></span></div></div>',i=L(".stamped-questions");(a=L(".stamped-questions-placeholder")).length&&(i=L(".stamped-questions",a));var d=L(".stamped-pagination",i);d.length?d.replaceWith(r):i.append(r),d=L(".stamped-pagination",i);var e=s,t=t,n=[];if(n.push(1),e<=7){for(o=2;o<e;o++)n.push(o);e==t&&n.push(t)}8<=e&&(1<=t-2&&(t-2!=1&&n.push(t-2),n.push(t-1)),1!=t&&n.push(t),(s=t+2)<=e&&(n.push(t+1),s!=e&&n.push(t+2))),1==t||1==t?L("#stamped-pagination-prev",d).hide():L("#stamped-pagination-prev",d).show(),e==t||1==e?L("#stamped-pagination-next",d).hide():L("#stamped-pagination-next",d).show(),e!=t&&n.push(e);for(var o=0;o<n.length;o++)n[o]==t?L("#pages",d).append(' <span class="page active"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+n[o]+'">'+n[o]+"</a></span> "):L("#pages",d).append(' <span class="page"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+n[o]+'">'+n[o]+"</a></span> ")}}(t,i||1,n),s.length?1<i&&_e(".stamped-questions-placeholder"):1<i&&_e(S),d||L(".stamped-questions-filter .stamped-sort-select").val("recent"),o&&L(".stamped-review-reply-body",r).each(function(){var e;L(this).attr("data-link-processed")||(L(this).attr("data-link-processed",!0),e=L(this).html(),L(this).html(e.linkify()))}),We("stamped:questions:loaded"))}})))}function ue(e,t){L("#stamped-questions-placeholder, .stamped-questions-placeholder").length||(L(".stamped-tabs #tab-reviews").removeClass("active"),L(".stamped-tabs #tab-questions").removeClass("active"),"questions"==t?L(".stamped-tabs #tab-questions").addClass("active"):"reviews"==t&&L(".stamped-tabs #tab-reviews").addClass("active"),e&&(L(e).addClass("active"),t=L(e).data("type")),"reviews"==t?(L(".stamped-reviews").show(),L(".stamped-reviews-filter").show(),L(".stamped-questions").hide(),L(".stamped-questions-filter").hide(),L("#stamped-sort-select").show()):"questions"==t&&(L(".stamped-reviews").hide(),L(".stamped-reviews-filter").hide(),L(".stamped-questions").show(),L(".stamped-questions-filter").show(),L("#stamped-sort-select").hide()),L(".new-review-form").hide(),L(".new-question-form").hide())}function he(e){var t=function(e,t){for(var a=[],s=0;s<t;)a[s++]=e;return a.join("")}("★",e.reviewRating),a=_.attr("data-image-url")||"",s="https://stamped.io/facebookpost?caption="+t+" "+encodeURIComponent(e.reviewTitle)+"&name="+t+" "+encodeURIComponent(e.reviewTitle)+"&description="+encodeURIComponent(e.reviewMessage)+"&link="+encodeURIComponent(e.productUrl)+"&picture="+encodeURIComponent(a.replace("%3F","?")),a="https://www.facebook.com/dialog/feed?app_id=222664514734026&display=popup&link="+encodeURIComponent(s)+"&name="+encodeURIComponent(e.reviewTitle)+"&redirect_uri=https://stamped.io/shares?productId="+e.productId,s="https://twitter.com/intent/tweet?text="+t+" "+e.reviewMessage.substr(0,140)+"&url="+encodeURIComponent(e.productUrl),t="https://plus.google.com/share?url="+encodeURIComponent(e.productUrl),e=L(".stamped-thank-you .stamped-share-links");L(".facebook",e).attr("href",a).attr("target","_blank"),L(".twitter",e).attr("href",s).attr("target","_blank"),L(".google",e).attr("href",t).attr("target","_blank")}var ge=[];function ve(e,t){var a=L(e),s=a.attr("data-element-id"),r=a.attr("data-widget-type"),i=(a.attr("data-widget-persist-data"),a.attr("data-review-id")),d=a.attr("data-review-ids")?a.attr("data-review-ids").toString().split(","):null,n=a.attr("data-product-id"),o=a.attr("data-product-ids")?a.attr("data-product-ids").toString().split(","):null,l=a.attr("data-product-category")||a.attr("data-product-type"),p=a.attr("data-product-brand"),c=a.attr("data-product-sku"),m=(a.attr("data-product-title"),a.attr("data-limit-words")),u=a.attr("data-random"),h=a.attr("data-show-avatar"),g=a.attr("data-take"),v=a.attr("data-fill-empty"),f=a.attr("data-min-rating"),w=a.attr("data-min-length"),y=a.attr("data-rating"),b=a.attr("data-tags"),S=a.attr("data-tags-exclude"),k=a.attr("data-syndication")||!0,_=a.data("with-photos"),C=a.data("with-videos"),I=a.data("sort-reviews"),T=a.data("widget-data"),O=a.data("widget-language"),E=a.data("widget-country-iso"),U=a.data("instagram-gallery-id"),x=a.data("album-id"),R=a.data("customer-email"),F=a.data("customer-first-name"),j=a.data("customer-id"),e=-1<r.indexOf("rewards")?q.referral_code:null,a=a.data("is-preview");return{type:r,reviewId:i,reviewIds:d,productId:n,productIds:o,productCategory:l,productBrand:p,productSKU:c,limitWords:m,random:u,showAvatar:h,isFillEmpty:v,apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,page:t,skip:g,minRating:f,minLength:w,rating:y,isWithPhotos:_,isWithVideos:C,sortReviews:I,instagramGalleryId:U,albumId:x,dataType:T,widgetLanguage:O,widgetCountryIso:E,tags:b,tagsExclude:S,isSyndication:k,elementId:s,customerEmail:R,customerFirstName:F,customerExternalId:j,referralCode:e,isPreview:a}}function fe(n,e){var t=q.SECURE_ENDPOINT+"/widget/reviews/batch";L.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({data:e}),xhrFields:{withCredentials:!0},url:t,success:function(e,t,a){for(var s,r=e.length,i=100,d=0;d<r;d++)e[d]&&(i+=50,s=e[d].elementId,we(L("rewards"==n?'#stamped-rewards-widget[data-element-id="'+s+'"]':'#stamped-reviews-widget[data-element-id="'+s+'"]'),e[d],e.translations,i))}})}function we(o,l,e,t){setTimeout(function(){var e,t,a,s,r,i,d,n;l&&(e=l.template,t=l.lang,a=o.attr("data-widget-type"),s=o.data("widget-persist-data")||!1,L(o).attr("data-lang",t||"en"),"instagram-feed"!=a&&"instagram-feed-dev"!=a&&"visual-gallery"!=a&&1!=s&&L(o).html(""),"single"==a?(o.append(e),StampedWidgetSingleFn,StampedWidgetSingleFn.init(l.data,o,L)):"full-page"==a||"full-page-nps"==a?(r=o.attr("data-rich-snippet"),i="/"==location.pathname,0<l.total&&"true"==r&&!i&&(d={"@context":"http://schema.org","@type":"Product",name:l.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:l.rating,reviewCount:l.total}},(n=F.createElement("script")).type="application/ld+json",n.innerHTML=JSON.stringify(d),F.getElementsByTagName("head")[0].appendChild(n)),o.append(e),StampedWidgetFullPageFn,StampedWidgetFullPageFn.init(l,o,L)):"full-page-multiple"==a?(o.append(e),StampedWidgetFullPageMultipleFn,StampedWidgetFullPageMultipleFn.init(l,o,L)):"reviews-highlight"==a?(o.append(e),StampedWidgetReviewsHighlightFn,StampedWidgetReviewsHighlightFn.init(l,o,L)):"reviews-popup"==a?(o.append(e),StampedWidgetReviewsPopupFn,StampedWidgetReviewsPopupFn.init(l,o,L)):"people-highlight"==a?(o.append(e),StampedWidgetPeopleHighlightFn,StampedWidgetPeopleHighlightFn.init(l,o,L)):"drawer"==a?(o.append(e),StampedWidgetDrawerFn,StampedWidgetDrawerFn.init(l,o,L)):"carousel"==a?(o.append(e),StampedCarouselFn,StampedCarouselFn.init(l,o,L)):"carousel-nps"==a?(o.append(e),StampedCarouselNPSFn,StampedCarouselNPSFn.init(l,o,L)):"carousel-checkout-comments"==a?(o.append(e),StampedCarouselCheckoutCommentFn,StampedCarouselCheckoutCommentFn.init(l,o,L)):"carousel-photos"==a?(o.append(e),StampedCarouselPhotosFn,StampedCarouselPhotosFn.init(l.data,o,L)):"site-badge"==a?(r=o.attr("data-rich-snippet"),i="/"==location.pathname,0<l.total&&"true"==r&&!i&&(d={"@context":"http://schema.org","@type":"Product",name:l.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:l.rating,reviewCount:l.total}},(n=F.createElement("script")).type="application/ld+json",n.innerHTML=JSON.stringify(d),F.getElementsByTagName("head")[0].appendChild(n)),o.append(e),StampedSiteBadgeFn,StampedSiteBadgeFn.init(l,o,L)):"top-rated"==a?(o.append(e),StampedTopRatedFn,StampedTopRatedFn.init(l,o,L)):"wall-photos"==a?(o.append(e),StampedWallPhotosFn,StampedWallPhotosFn.init(l,o,L)):"checkout-comments"==a?(o.append(e),StampedCheckoutCommentsFn,StampedCheckoutCommentsFn.init(l,o,L)):"instagram-feed"==a?(L(o).is(":empty")&&o.append(e),StampedInstagramFeedFn,StampedInstagramFeedFn.init(l,o,L)):"visual-gallery"==a?(N.stampedVisualGalleryDataArr||o.append(e),StampedVisualGalleryFeedFn,StampedVisualGalleryFeedFn.init(l,o,L)):"facebook-messenger-optin"==a?(StampedFacebookMessengerOptinFn,StampedFacebookMessengerOptinFn.init(l,o,L)):"nps-submission-form"==a?(o.append(e),StampedNPSSubmissionForm,StampedNPSSubmissionForm.init(l,o,L)):"rewards-summary"==a?(o.append(e),StampedRewardsSummary,StampedRewardsSummary.init(l,o,L)):"rewards-how-it-works"==a?(o.append(e),StampedRewardsHowItWorks,StampedRewardsHowItWorks.init(l,o,L)):"rewards-referral-modal"==a?(o.append(e),StampedRewardsReferralModal,StampedRewardsReferralModal.init(l,o,L)):"rewards-referral-claim-modal"==a?(o.append(e),StampedRewardsReferralClaimModal,StampedRewardsReferralClaimModal.init(l,o,L)):"rewards-earnings"==a||"rewards-earnings-v2"==a?(o.append(e),StampedRewardsEarnings,StampedRewardsEarnings.init(l,o,L)):"rewards-spendings"==a||"rewards-spendings-v2"==a?(o.append(e),StampedRewardsSpendings,StampedRewardsSpendings.init(l,o,L)):"rewards-vip-tiers"==a?(o.append(e),StampedRewardsVIPTiers,StampedRewardsVIPTiers.init(l,o,L)):"rewards-referral"==a?(o.append(e),StampedRewardsReferral,StampedRewardsReferral.init(l,o,L)):"rewards-activities"==a?(o.append(e),StampedRewardsActivities,StampedRewardsActivities.init(l,o,L)):"rewards-redeem-variable-slider"==a?(o.append(e),StampedRewardsRedeemVariableSlider,StampedRewardsRedeemVariableSlider.init(l,o,L)):"rewards-redeem-select-options"==a?(o.append(e),StampedRewardsRedeemSelectOptions,StampedRewardsRedeemSelectOptions.init(l,o,L)):"widget-development"==a&&(StampedWidgetDevFn,StampedWidgetDevFn.init(l,o,L)),We("stamped:reviews:widget:loaded"))},t)}function ye(e,t,a){var s;s=a?((s=new Date).setTime(s.getTime()+24*a*60*60*1e3),"; expires="+s.toGMTString()):"",F.cookie=e+"="+t+s+"; path=/; SameSite=None; Secure"}function be(e){for(var t=e+"=",a=F.cookie.split(";"),s=0;s<a.length;s++){for(var r=a[s];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function Se(e){for(var t in e)null!==e[t]&&""!==e[t]&&void 0!==e[t]||delete e[t];return e}var ke=!1;function _e(e){var t,a,s;L(e).length&&(je("Animation: "+(t=L(S).attr("data-animation"))),"false"===t||!1===t||1!=ke&&(ke=!0,a=L(e),s=L("html, body"),e=L(S).attr("data-offset")||1,O()&&(e=L(S).attr("data-offset-mobile")||1),s.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){s.stop(),ke=!1}),s.animate({scrollTop:a.offset().top-e},t||1e3,function(){s.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove"),ke=!1})))}function Ce(e){var t,a;"review"==e?(ue(null,"reviews"),t=L(".new-review-form"),(a=L(".new-question-form")).slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible")):(t.slideDown(400,function(){_e("#stamped-main-widget .new-review-form")}),t.addClass("stamped-visible"))):"question"==e&&(ue(null,"questions"),t=L(".new-question-form"),(a=L(".new-review-form")).slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible")):(t.slideDown(400,function(){_e(".new-question-form")}),t.addClass("stamped-visible")))}function Ie(e){var t=L(e).parents(".new-review-form"),a=L(e).attr("data-value"),e=L(e).parent();t.find("input[name='reviewRating']").val(a),a=a,(e=e).find("a:lt("+a+")").removeClass("fa-star-o").addClass("fa-star-checked"),e.find("a:gt("+(a-1)+")").removeClass("fa-star-checked").addClass("fa-star-o")}function Te(e,t,a,s){L(S).length&&(he(e),L(".stamped-user-review",_).hide(),L(".stamped-thank-you",_).show(),t.reviewRating<3?(L(".stamped-thank-you p",_).hide(),L(".stamped-thank-you .stamped-share-links",_).hide()):(L(".stamped-thank-you p",_).show(),L(".stamped-thank-you .stamped-share-links",_).show()),L(".new-review-form",_).hide(),L(".edit-review-form",_).hide(),L(".stamped-summary-actions-newreview").hide(),L("#stamped-button-submit",_).removeAttr("disabled"),s&&L("#stamped-button-submit",_).val(s),_e(S),function(e,t,a){if(null!=be("stamped-user-reviews")){for(var s=JSON.parse(be("stamped-user-reviews")),r=!1,i=0;i<s.length;i++)if(s[i].pid==e){r=!0,s[i];break}!r&&e&&t&&1==a&&(10<=s.length&&s.splice(0,1),s.push({pid:e,v:t}),ye("stamped-user-reviews",JSON.stringify(s),1))}else e&&t&&1==a&&(t=[{pid:e,v:t}],ye("stamped-user-reviews",JSON.stringify(t),1))}(a.productId,t.userReference,!0)),We("stamped:reviews:submitted")}function Oe(e){var t=1;e&&(t=L(e).data("page")),me(t)}function Ee(e,t,a){L||jQuery&&(L=jQuery),a&&L(a).closest(S).length&&(_=L(a).closest(S));_.attr("data-product-id");var s,a=L(".stamped-summary-ratings.selected .summary-rating-bar.selected",_).attr("data-rating");a&&(t=a),L(".stamped-sort-select",_).length&&(s=L(".stamped-sort-select",_).val()),pe(e,s,t)}function Ue(e){var t;"qna"==e?(L(".stamped-questions-filter .stamped-summary-actions-clear").hide(),L(".stamped-questions-search-input").val(""),L(".stamped-questions-search-clear").hide(),L(_).removeAttr("data-search-qna"),Oe()):(L("select.stamped-filter-select").each(function(){L(this).val("")}),L(".stamped-summary-keywords-list li").removeClass("selected"),L(_).removeAttr("data-keyword"),L(".stamped-reviews-filter .stamped-summary-actions-clear").hide(),L(".stamped-reviews",_).removeAttr("data-filtered"),L(".stamped-sort-select").length&&(t=L(".stamped-sort-select").val()),C={},L(".stamped-reviews-search-input").val(""),L(".stamped-reviews-search-clear").hide(),L(_).removeAttr("data-search"),de(),pe(1,t,null,!0))}String.linkify||(String.prototype.linkify=function(){return this.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,'<a href="$&" target="_blank">$&</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>').replace(/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim,'<a href="mailto:$&">$&</a>')});var xe=!1,Re=null;function Fe(e,t){t=t||N.location.href,e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function je(e,t){var a="true"==Fe("stamped_debug")||1==N.stamped_debug,s=N.stamped_debug_level||Fe("stamped_debug_level");a&&(t||console.log("[Stamped.io]",e),t&&s&&console.log("[Stamped.io level"+s+"]",e))}function Ne(e,t){(a=F.createElement("script")).type="text/javascript",a.charset="UTF-8",a.src=e;e=F.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e),a.onload=a.onreadystatechange=t}function Le(e,t){try{return"undefined"!=typeof Storage&&(localStorage.setItem(e,JSON.stringify(t)),1)}catch(e){}}function qe(t){try{if("undefined"==typeof Storage)return!1;var a;try{a=JSON.parse(localStorage.getItem(t))||null}catch(e){a=localStorage.getItem(t)}return a}catch(e){}}function Ge(e,t){var a,s="stamped_app_key",r=qe(s);r&&r.apiKey?(je(r),We("stamped:init:getAppKey",{detail:r}),Ae(r)):((a=new XMLHttpRequest).onreadystatechange=function(){var e,t;4!==a.readyState||200!==a.status||(e=JSON.parse(a.responseText))&&e.apiKey&&(Le(s,e),We("stamped:init:getAppKey",{detail:e}),!0===e.skip||(appKey=e.apiKey,t={apiKey:appKey},"undefined"!=typeof Shopify?t.storeUrl=Shopify.shop:t.sId=e.sId,Ae(t)))},r="","shopify"==e?r="shopShopifyDomain="+t:"bigcommerce"==e&&(r="storeHash="+t),a.open("GET","https://stamped.io/api/getappkey?"+r,!0),a.send())}function Ae(e){if(1==N.isInitializedStamped)return je("Already initalized"),StampedFn.loadWidget(!0),void StampedFn.loadDisplayWidgets();N.isInitializedStamped=!0,e&&(N.StampedGlobalOptions=e),N.StampedGlobalOptions&&N.StampedGlobalOptions.apiKey&&(e="true"==Fe("stamped_force_jquery")||q.is_force_jquery,"undefined"==typeof jQuery||1==e?Ne("https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js",function(){L=jQuery.noConflict(!0),E(),N.isInitializedStamped=!0}):(E(0,jQuery),N.isInitializedStamped=!0))}var Pe=F.getElementById("stamped-script-widget"),De="";(Pe=Pe||F.getElementById("stamped-script-init"))&&(De=Pe.src);var Ke=!1;if((0<De.indexOf("skipCss=true")||1==q.exclude_main_css)&&(Ke=!0),Ke||function(e){for(var t=F.styleSheets,a=0,s=t.length;a<s;a++)if(t[a]&&t[a].href&&-1<t[a].href.indexOf(e))return;var r=F.createElement("link");r.rel="stylesheet",r.href=e,r.type="text/css";var i=F.getElementsByTagName("link")[0];i?i.parentNode.insertBefore(r,i):(i=F.getElementsByTagName("head")[0],r.setAttribute("async",""),i.appendChild(r))}("//cdn1.stamped.io/files/widget.min.css"),"undefined"!=typeof Shopify){var ze=!1;if(Shopify.shop&&(null!=Pe&&(-1<De.indexOf("skip=true")&&(ze=!0),!(Ke=Pe.getAttribute("data-api-key"))&&-1<De.indexOf("apiKey")&&(Ke=Fe("apiKey",De)),Ke&&(ze=!0,Ae({apiKey:Ke,storeUrl:Shopify.shop}))),ze||Ge("shopify",Shopify.shop)),Shopify.Checkout&&"undefined"==typeof StampedShopifyCheckout){if("function"==typeof N.StampedShopifyCheckout)return!1;Ne("//cdn1.stamped.io/files/shopify-checkout.min.js",function(){We("stamped:script-shopify-checkout:loaded")})}}function We(e,t){var a;N.CustomEvent?a=new CustomEvent(e,t):(a=F.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t);try{F.dispatchEvent(a)}catch(e){}}return null==Pe||(Pe=Pe.getAttribute("data-store-hash"))&&Ge("bigcommerce",Pe),{init:Ae,initRewards:G,reloadUGC:x,toggleForm:Ce,setRating:Ie,submitForm:function(e){var t,a=_.data("label-submitting"),s=L(".new-review-form .stamped-button-primary",_).val(),r=null;if(e=e,t={},L(e).hasClass("new-review-form")||(e=L(e).parents(".new-review-form")),e=L("input,textarea,select,radio",e).serializeArray(),L.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),i=t,i.reviewRating&&i.author){var i,d,n={productName:_.attr("data-name"),productId:_.attr("data-product-id"),productSKU:_.attr("data-product-sku"),productType:_.attr("data-product-type"),productDescription:_.attr("data-description"),productImageUrl:_.attr("data-image-url"),productUrl:_.attr("data-url"),reviewSource:"widget",userReference:_.attr("data-user-reference")},r=i=L.extend(i,n),o=new FormData;for(d in i){var l=i[d];-1<l.indexOf("+")&&-1<d.indexOf("customFormOption")&&(l=i[d].replace("+","%2B")),o.append(d,l)}var p,c=0;for(p in y)o.append("image"+c,y[c]),i["image"+c]=y[c],c++;je(Object.prototype.toString.call(o)),je(o);e={url:q.SECURE_ENDPOINT+"/reviews3?"+L.param(Se({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl})),cache:!1,processData:!1,contentType:!1,type:"POST",data:o._blob?o._blob():o,beforeSend:function(e){L("#stamped-button-submit",_).attr("disabled","disabled"),a&&L("#stamped-button-submit",_).val(a)},error:function(e){We("stamped:reviews:submitError"),1==q.is_ignore_submit_error?Te(r,e,n,s):(L("#stamped-button-submit",_).removeAttr("disabled"),s&&L("#stamped-button-submit",_).val(s))},success:function(e){Te(r,e,n,s)}};L.ajax(e)}},submitQuestionForm:function(e){var t,a,s,r,i=L(e||"#new-question-form"),d=L(S);i.length&&d.length&&(t=d.data("name"),a=d.data("description"),s=d.data("product-sku"),r=d.data("url"),e=d.data("image-url"),(d=i.serializeArray()).push({name:"productName",value:t}),d.push({name:"productDescription",value:a}),d.push({name:"productSKU",value:s}),d.push({name:"productUrl",value:r}),d.push({name:"productImageUrl",value:e}),d.push({name:"apiKey",value:N.StampedGlobalOptions.apiKey}),d.push({name:"sId",value:N.StampedGlobalOptions.sId}),d.push({name:"storeUrl",value:N.StampedGlobalOptions.storeUrl}),L('input[type="submit"]',i).attr("disabled","disabled"),L.ajax({type:"POST",url:"https://stamped.io/api/questions",data:L.param(d),crossDomain:!0,success:function(e){i.hide(),L(".question-form-wrapper .stamped-form-message-success").show(),i[0].reset(),L('input[type="submit"]',i).removeAttr("disabled")}}))},toggleFormEdit:function(){L(".edit-review-form",_).toggle()},pageQuestions:Oe,sortQuestions:function(e){e.value&&me(1,e.value)},pageReviews:Ee,sortReviews:function(e){_.attr("data-product-id"),e.value&&pe(1,e.value,null,!0)},filterReviews:function(e){var t=L("option:first-child",e).text(),e=e.value;C={};var a,s=1;L("select.stamped-filter-select").each(function(){var e=L("option:first-child",this).text(),t=this.value;C["qt"+s]=e,C["qv"+s]=t,s++}),L(".stamped-reviews-filter .stamped-summary-actions-clear").show(),L(".stamped-reviews",_).attr("data-filtered","true"),L(".stamped-sort-select").length&&(a=L(".stamped-sort-select").val()),pe(1,a,null,!0),t&&e&&K({customOptionTitle:t,customOptionValue:e},_.attr("data-product-id"))},filterClear:Ue,pageWidget:function(e,t){var s,r,a=L(e).data("page");(e=L(e).closest("#stamped-reviews-widget")).attr("data-page",a),s=e,a=a,r=t,t=q.SECURE_ENDPOINT+"/widget/reviews",a=ve(s,a),r=r||{},L.ajax({type:"GET",url:t+"?"+L.param(Se(a)),dataType:"json",success:function(e,t,a){we(s,e),r.callback&&r.callback()}})},loadBadges:te,loadWidget:Z,loadDisplayWidgets:ae,voteReview:function(e,t,a){var s=L(e),r=s.parent();r.fadeTo("slow",.3),s.addClass("disable-link"),L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/reviews/vote",data:{reviewId:t,vote:a,apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl},success:function(e){L(".stamped-thumbs-up",r).attr("data-count",e.voteUp),L(".stamped-thumbs-down",r).attr("data-count",e.voteDown),L(".stamped-thumbs-up i",r).html("&nbsp; "+e.voteUp),L(".stamped-thumbs-down i",r).html("&nbsp; "+e.voteDown),r.fadeTo("slow",1),s.removeClass("disable-link")}})},openUGCModal:function(S,e,t,a,s,k,_,C,r){var I;1!==a&&a||(S=function(e,t){var a=[];for(i=0;i<e.length;i++){var s=e[i];if(1!=t||s.reviewUserPhotos||s.reviewUserVideos){var r={photos:[],videos:[],name:s.author,via:"Photos",title:s.reviewTitle,body:s.reviewMessage,date:s.reviewDate,reply:s.reviewReply,dateReplied:s.dateReplied,dateFull:s.dateCreated,verifiedType:s.reviewVerifiedType,rating:s.reviewRating,products:[{url:s.productUrl,title:s.productName,imageUrl:s.productImageUrl,imageLargeUrl:s.productImageLargeUrl,productUrl:s.productDirectUrl||""}],review_id:s.id,votes:{up:s.reviewVotesUp,down:s.reviewVotesDown},options:[]};if(s.reviewUserPhotos||s.reviewUserVideos){if(s.reviewUserVideos){var d=s.reviewUserVideos.split(",");for(ii=0;ii<d.length;ii++){var n="//s3.us-west-2.amazonaws.com/stamped.io/uploads/videos/"+d[ii],o="//cdn.stamped.io/uploads/videos/"+d[ii]+".jpg";n.indexOf(".mp4")<0&&(n+=".mp4"),0<=n.indexOf("nothumb")&&(o=""),r.photos.push({videoUrl:n,imageThumbnailUrl:o})}}if(s.reviewUserPhotos){var l=s.reviewUserPhotos.split(","),p="//cdn.stamped.io/uploads/photos/";for(s.reviewUserPhotosWatermark&&(p="//cdn.stamped.io/"+s.reviewUserPhotosWatermark+"/uploads/photos/"),ii=0;ii<l.length;ii++)r.photos.push({imageUrl:p+l[ii],imageThumbnailUrl:"//cdn.stamped.io/uploads/photos/thumb/"+l[ii]})}}else r.photos.push({imageUrl:s.productImageLargeUrl,imageThumbnailUrl:s.productImageUrl});if(s.reviewOptionsList&&s.reviewOptionsList.length)for(ii=0;ii<s.reviewOptionsList.length;ii++)r.options.push({message:s.reviewOptionsList[ii].message,value:s.reviewOptionsList[ii].value});a.push(r)}}return a}(S,s)),null!=S||S.length||u(e,k);var s='<div class="stamped-ugc-modal" data-lang="'+(_=_||"en")+'"> <div class="stamped-ugc-modal-wrapper" aria-label="Shop our Instagram look"><span href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close show-mobile" style="display:none;" tabindex="0">X</span> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-previous" data-direction="left" tabindex="0" aria-label="Previous Photo"> <i class="stamped-fa stamped-fa-angle-left"></i> </div> <div class="stamped-ugc-modal-image-wrapper"> <div class="stamped-ugc-modal-image"></div> <ul></ul> </div> <div class="stamped-ugc-modal-content"> <span href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close" tabindex="0">X</span> <div class="stamped-ugc-modal-content-wrapper"> <div class="stamped-ugc-modal-user"> <div class="stamped-ugc-modal-user-source"></div><div class="stamped-ugc-modal-user-username"></div> </div> <div class="stamped-ugc-modal-caption"></div><div class="stamped-ugc-modal-votes"></div> <div class="stamped-ugc-modal-tags"> <span class="stamped-ugc-modal-tag"><a aria-label="Link to Product" {0} target="_top"> <div class="stamped-ugc-modal-tags-product-image-wrapper"><img {1} class="stamped-ugc-modal-tags-product-image" onerror=\'this.style.display = "none"\' alt="{2}" /></div> <div class="stamped-ugc-modal-tags-product-title">{2}</div> </a><div class="stamped-ugc-modal-tags-btn" data-shoppable-url="{3}"></div> </span> </div> </div> </div> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-next" data-direction="right" tabindex="0" aria-label="Next Photo"> <i class="stamped-fa stamped-fa-angle-right"></i> </div> <div class="stamped-ugc-modal-list-photos"><ul></ul></div> </div> </div>',T=(L(t).attr("data-hover-text"),L(t).attr("data-shop-button-text"),L(t).attr("data-url-param")||""),O=L(t).attr("data-url-store")||N.stamped_global_url_store||"";L(t).attr("data-cropped"),L(t).attr("data-page"),L(t).attr("data-take"),L("#stamped-ugc-modal").length||((I=L(s)).attr("data-modal-type",a),I.attr("data-modal-shoppable",r||!1),L(I).appendTo(F.body));for(var d="",n=S.length,E=E||L(".stamped-ugc-modal-tags:first",I).html(),o=S?S.length:0,U=0;U<n;U++){var l=S[U],p=l.imageUrl;p&&(d+=templateBlock.formatStringStamped(o,p),o++),l.photos.length&&l.photos[0].imageUrl&&(ge[U]=new Image,ge[U].src=l.photos[0].imageUrl)}L(".stamped-ugc-media-block-template",t).append(d),L(t).keydown(function(e){37===e.keyCode?h("left"):39===e.keyCode&&h("right")}),L(F).on("click keypress",".stamped-modal-close, .stamped-ugc-modal.open",function(e){!0===j(e)&&e.target==this&&(I.remove(),L("body").removeClass("stamped-modal-open"))}),I.on("click keypress",".stamped-ugc-modal-nav-previous, .stamped-ugc-modal-nav-next",function(e){!0===j(e)&&(e=L(this).attr("data-direction"),h(e))}),F.addEventListener("touchstart",function(e){c=e.touches[0].clientX,m=e.touches[0].clientY},!1),F.addEventListener("touchmove",function(e){if(!c||!m)return;var t=e.touches[0].clientX,e=e.touches[0].clientY,t=c-t,e=m-e;Math.abs(t)>Math.abs(e)&&h(0<t?"right":"left");m=c=null},!1);var c=null,m=null;function x(){var e=Number(L(this).text())+1,t=L(this).data("image-url");L(".stamped-ugc-modal-image-wrapper ul li").removeClass("active"),L(".stamped-ugc-modal-image-wrapper ul li:nth-child("+e+")").addClass("active"),"image"==q.modal_ugc_image_viewer?L(".stamped-ugc-modal-image",I).html('<img src="'+t+'" alt="Customer Photo" />'):L(".stamped-ugc-modal-image",I).css("background-image","url("+t+")"),We("stamped:ugcmodal:paged")}function R(){var e=L(this).data("index-review"),t=L(this).data("index-photo");L(".stamped-ugc-modal-list-photos ul li").removeClass("active"),L(".stamped-ugc-modal-list-photos ul li[data-index-review="+e+"][data-index-photo="+t+"]").addClass("active"),u(e,t),We("stamped:ugcmodal:paged")}var u=function(e,t){var a,s=S[e];if(null!=s&&null!=s.photos){if(null!==t?(k=t)>s.photos.length-1&&(k=0):(!k||k>s.photos.length-1)&&(k=0),!L(".stamped-ugc-modal-list-photos ul li",I).length){for(var r=0;r<S.length;r++)for(var i=0;i<S[r].photos.length;i++){var d=e==r&&t==i?"active":"",n=(S[r].photos[i].imageUrl,S[r].photos[i].imageThumbnailUrl),o=F.createElement("li");o.className=d,o.innerHTML="",o.className+=" stamped-lazyload";d=F.createAttribute("data-index-review");d.value=r,o.setAttributeNode(d),(l=F.createAttribute("data-index-photo")).value=i,o.setAttributeNode(l),N.LazyLoadStamped&&LazyLoadStamped.update?((d=F.createAttribute("data-bg")).value="url("+n+")",o.setAttributeNode(d)):o.style.background="url("+n+")",L(".stamped-ugc-modal-list-photos ul",I).append(o),o.onclick=R}try{N.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}}for(null!=s.photos[k]&&(u=s.photos[k].imageUrl,a=s.photos[k].videoUrl,u?"image"==q.modal_ugc_image_viewer?(L("video",L(".stamped-ugc-modal-image",I)).remove(),L(".stamped-ugc-modal-image",I).html('<img src="'+u+'" alt="'+s.via+" photo uploaded by "+s.name+" on "+s.dateFull+'" />')):(L("video",L(".stamped-ugc-modal-image",I)).remove(),L(".stamped-ugc-modal-image",I).css("background-image","url("+u+")")):a&&L(".stamped-ugc-modal-image",I).fadeOut("",function(){L(".stamped-ugc-modal-image",I).css("background-image",'url("")'),L(".stamped-ugc-modal-image",I).html('<video class="stamped-ugc-modal-video" src="'+a+'" width="100%" controls autoplay />'),L(this).fadeIn()})),L(".stamped-ugc-modal-image-wrapper ul",I).html(""),ii=0;ii<s.photos.length;ii++){var l,p=ii===k?"active":"",c=F.createElement("li");c.className=p,c.innerHTML=ii,(l=F.createAttribute("data-image-url")).value=s.photos[ii].imageUrl,c.setAttributeNode(l),L(".stamped-ugc-modal-image-wrapper ul",I).append(c),c.onclick=x}L(".stamped-ugc-modal-user-source").text(s.via),L(".stamped-ugc-modal-user-username",I).text(s.name),L(".stamped-ugc-modal-user-username",I).attr("data-verified-type",s.verifiedType);var m="Verified Buyer",u="Shop Now";C&&"en"!=_&&(m=C.label_verified_buyer||m,u=C.label_shop_now||u),L(".stamped-ugc-modal-user-username",I).append('<span class="stamped-verified-badge">'+m+"</span>"),L(".stamped-ugc-modal-tags-btn",I).append("<span>"+u+"</span>");var h="";if(s.rating){for(var g=0;g<s.rating;g++)h+='<i class="stamped-fa stamped-fa-star"></i>';for(g=0;g<5-s.rating;g++)h+='<i class="stamped-fa stamped-fa-star-o"></i>'}var v="";if(s.options&&s.options.length){for(v+='<ul class="">',U=0;U<s.options.length;U++){var f=s.options[U].message,w=s.options[U].value;v+='<li data-value="'+f.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")+'"><span class="stamped-ugc-modal-options-message">'+f+'</span> <span class="stamped-ugc-modal-options-value">'+w+"</span></li>"}v+="</ul>"}s.reply||(s.reply=""),u=s.dateFull?new Date(s.dateFull):new Date(s.date);u=(new timeagoStamped).formatDateString(u);for("en"!=_&&(u=s.date),L(".stamped-ugc-modal-caption",I).html('<div class="stamped-ugc-modal-date" data-date="'+s.date+'">'+u+'</div><div class="stamped-ugc-modal-caption-rating">'+h+'</div><div class="stamped-ugc-modal-caption-options">'+v+'</div><div class="stamped-ugc-modal-caption-title">'+(s.title||"")+'</div> <div class="stamped-ugc-modal-caption-body">'+s.body+'</div> <div class="stamped-ugc-modal-caption-reply">'+s.reply+"</div>"),L(".stamped-ugc-modal-votes",I).html('<span class="stamped-ugc-modal-vote-up" data-count="'+s.votes.up+'" onclick="StampedFn.voteReview(this, '+s.review_id+',1)"><i class="stamped-fa stamped-fa-thumbs-up"></i></span><span class="stamped-ugc-modal-vote-down" data-count="'+s.votes.down+'" onclick="StampedFn.voteReview(this, '+s.review_id+',1)"><i class="stamped-fa stamped-fa-thumbs-down"></i></span>'),L(".stamped-ugc-modal-tags",I).html(""),U=0;U<s.products.length;U++){var y=s.products[U];y.title=y.title||"",O?(y.url=y.url.replace("?storeUrl=https://",""),y.url=y.url+"?storeUrl="+O):T&&(y.url=y.url+"?param="+T);var b=y.imageUrl||y.imageLargeUrl;y.imageUrl?L(".stamped-ugc-modal-tags",I).append(E.formatStringStamped('href="'+y.url+'"','src="'+b+'"',y.title,y.productUrl)):L(".stamped-ugc-modal-tags",I).append(E.formatStringStamped('href="'+y.url+'"',"",y.title,y.productUrl))}I.attr("data-review-index",e),I.attr("data-photo-index",k),I.hasClass("open")||(I.addClass("open"),L("body").addClass("stamped-modal-open"),We("stamped:ugcmodal:open"))}},h=function(e){I.hasClass("open")&&(I.attr("data-review-index"),I.attr("data-photo-index"),"left"==e?L(".stamped-ugc-modal-list-photos ul li.active").prev().click():"right"==e&&(e=L(".stamped-ugc-modal-list-photos ul li.active").next(),L(e.click()),e.length||"instagram"==I.attr("data-modal-type")&&We("stamped:ugcmodal:last")))};null!=S&&S.length&&u(e,k)},openUGCPhoto:function(i,e,d,t){if(xe){for(var a=null,s=0;s<b.length;s++)b[s].id==i&&(a=s);null!=a&&StampedFn.openUGCModal(b,a,L(S),null,null,d,Re),xe=!1}else{xe=!0;var r=q.SECURE_ENDPOINT+"/widget/reviews",n=L(_).attr("data-product-sku")||"",o="",l="",p=[];!0===t?(e=L(_).attr("data-product-id")||"",o=L(_).attr("data-name")||"",l=L(_).attr("data-product-type")||""):L(".stamped-reviews .stamped-review",_).each(function(){var e=L(this).attr("id");(e=e.replace("stamped-review-",""))&&p.push(e)}),L.ajax({type:"GET",url:r+"?"+L.param(Se({type:"widget-carousel-photos",reviewId:i,reviewIds:p,productId:e,productSKU:n,productType:l,productTitle:o,random:!1,isFillEmpty:!1,page:1,skip:100,minRating:1,isWithPhotos:!0,apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl})),dataType:"json",success:function(e,t,a){b=e.data;for(var s=null,r=0;r<b.length;r++)b[r].id==i&&(s=r);null!=s&&(Re=e.lang,StampedFn.openUGCModal(b,s,L(S),null,null,d,Re,e.translations)),xe=!1,0}})}return!1},initOptions:N.StampedGlobalOptions,loadSurveyOptin:function(e){var t,a=setInterval(function(){void 0!==N.StampedGlobalOptions&&(null!==e&&e.orderId&&L.ajax({type:"GET",url:"https://stamped.io/api/plugin/facebookmessenger?"+L.param(Se({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,orderId:e.orderId,customerEmail:e.customerEmail})),success:function(e){L("body").append(e.html);var t=L("#stamped-facebook-optin .fb-send-to-messenger")[0].outerHTML,e=F.createElement("iframe");e.height="100",e.width="100%";t="<!DOCTYPE html> <html> <head> <meta charset='utf-8' /> <title></title> </head> <script> var fbPageId, fbUserRef; window.fbAsyncInit = function() { FB.init({ appId : '222664514734026', xfbml : true, version : 'v6.0' }); FB.Event.subscribe('send_to_messenger', function(e) { var modal = window.top.document.getElementById('stamped-facebook-optin'); if (e.event == 'rendered'){ modal.style.display = 'block'; } if (e.event == 'opt_in'){ console.log('hide'); modal.style.display = 'none'; } }); }; (function(d, s, id){ var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) {return;} js = d.createElement(s); js.id = id; js.src = '//connect.facebook.net/en_US/sdk.js'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk') ); <\/script> <body>"+t+"</body> </html>";F.body.appendChild(e),L(e).appendTo("#stamped-facebook-optin .fb-send-to-messenger"),e.contentWindow.document.open(),e.contentWindow.document.write(t),e.contentWindow.document.close()}}),clearInterval(a)),5<=++t&&clearInterval(a)},2e3)},closeSurveyOptin:function(){L("#stamped-facebook-optin").remove()},triggerEvent:We,on:function(e,t){F.addEventListener?F.addEventListener(e,t):F.attachEvent("on"+e,function(){t.call(F)})},jQuery:L,stampedLog:je,getOptions:function(){return q},setOptions:function(e){Object.assign(q,e)},getLoggedInCustomer:function(){return I.customer},getDataRewards:function(){return I},loadLauncherView:$,scrollLauncherView:function(t){StampedFn.toggleLauncher(!0),setTimeout(function(){var e=L(t,f).offset();L(".stamped-rewards-content-container",f).scrollTop(e.top-155),je(L(".stamped-rewards-content-container",f)),je(e),je(t)},500)},toggleLauncher:D,toggleRewardsModal:D,rewardsApplyCode:function(e){$btn=L("#stamped-rewards-apply-code",f);var t=L(".stamped-reward-coupon-code",f).text(),a=$btn.text(),s=$btn.data("type"),r=I.links;return J("loading"),s=q.is_rewards_code_copy||-1<a.indexOf("Copy")||"copy"==s,We("stamped:rewards:coupon:applied",{detail:t}),1==s?(d(t),J("active")):(t=encodeURIComponent(t),r=r.shop+"/discount/"+t,e&&e.skip||L.ajax({type:"GET",url:r,data:{},success:function(e,t,a){J("active")}})),{code:t,setState:J}},rewardsReferralClaimCode:function(){var e=L("#referral_claim_email",f),t=L("#stamped-rewards-claim-code",f),a=e.val(),e=StampedFn.getOptions();a&&(Y(t,"loading",!0),L.ajax({type:"POST",url:e.SECURE_ENDPOINT+"/v2/rewards/referral/claim?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,email:a,referralCode:e.referral_code,debug:null}),dataType:"json",success:function(e,t,a){$("view-coupon",null,{couponCode:e.couponCode,title:e.title,viewTitle:e.title})},error:function(e){e=e.responseJSON?e.responseJSON.message:e.responseText?JSON.parse(e.responseText).message:"You are not eligible for the reward.";L(".stamped-reward-card-error",f).text(e)},complete:function(){Y(t,"active",!0,1e3)}}))},rewardsReferralSendEmail:function(e){var t=L("#email-to",f),a=L("#email-message",f),s=L(e),e=t.val(),t=a.val(),a=StampedFn.getOptions();e&&(Y(s,"loading",!0),L.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/v2/rewards/referral/send?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,fromEmail:I.customer.customerEmail,toEmail:e,message:t,debug:null}),data:{},success:function(e,t,a){},error:function(e){},complete:function(){Y(s,"active",!1,3e4)}}))},rewardsLink:function(e){var t=I.links;"login"==e?top.location.href=t.login:"signup"==e&&(top.location.href=t.signup)},rewardsRedeem:function(s,r,i){Y(s,"loading",!0),r=r||{},L.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/redeem?"+L.param({apiKey:N.StampedGlobalOptions.apiKey,sId:N.StampedGlobalOptions.sId,storeUrl:N.StampedGlobalOptions.storeUrl,campaignId:r.campaignId,points:r.points}),data:I.customer,dataType:"json",success:function(e,t,a){r.campaignId&&Y(s,"active",!0,1),i&&i(e)}})},rewardsPointsRefresh:z,rewardsReferralCopy:function(){var e=L(".stamped-reward-referral-wrapper .stamped-reward-copy-icon",f);d(I.customer.urlReferral);var t=e.html();e.html('<i class="far fa-check"></i>'),setTimeout(function(){e.html(t)},3e3)},rewardsCreateActivity:W,rewardsTriggerEarn:H,rewardsTriggerSpend:Q}}(window,document);